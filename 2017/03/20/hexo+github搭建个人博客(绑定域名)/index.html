<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="hexo,github,blog,next," />








  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.0" />






<meta name="description" content="前言&amp;emsp;&amp;emsp;一直想自己搞个人博客，在上面记录一些自己的日常！如今，github提供了免费的域名和空间，用户可以通过username.github.io来设置自己的个人主页或博客，虽然是静态的，但是聊胜于无啊。利用github pages的特性，一开始我使用jekyll来构造整个博客静态网站，但是使用了一阵子发现有不小的局限性以及扩展性不强，于是迁移到了生态圈更大的hexo,套用了简">
<meta property="og:type" content="article">
<meta property="og:title" content="hexo+github搭建个人博客(绑定域名)">
<meta property="og:url" content="http://wardlin.github.io/2017/03/20/hexo+github搭建个人博客(绑定域名)/index.html">
<meta property="og:site_name" content="wardlin's blog">
<meta property="og:description" content="前言&amp;emsp;&amp;emsp;一直想自己搞个人博客，在上面记录一些自己的日常！如今，github提供了免费的域名和空间，用户可以通过username.github.io来设置自己的个人主页或博客，虽然是静态的，但是聊胜于无啊。利用github pages的特性，一开始我使用jekyll来构造整个博客静态网站，但是使用了一阵子发现有不小的局限性以及扩展性不强，于是迁移到了生态圈更大的hexo,套用了简">
<meta property="og:image" content="http://wardlin.github.io/images/node global.png">
<meta property="og:image" content="http://wardlin.github.io/images/阿里云域名解析.png
">
<meta property="og:image" content="http://wardlin.github.io/images/头像更改.png">
<meta property="og:image" content="http://wardlin.github.io/images/网易云音乐外链.png">
<meta property="og:image" content="http://wardlin.github.io/images/algolia index.png">
<meta property="og:image" content="http://wardlin.github.io/images/algolia keys.png">
<meta property="og:image" content="http://wardlin.github.io/images/hexo algolia.png">
<meta property="og:image" content="http://wardlin.github.io/images/algolia indcies.png">
<meta property="og:image" content="http://wardlin.github.io/images/search.png">
<meta property="og:image" content="http://wardlin.github.io/images/algolia-search link.png">
<meta property="og:image" content="http://wardlin.github.io/images/algolia json answer.png">
<meta property="og:updated_time" content="2017-03-21T15:21:36.040Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="hexo+github搭建个人博客(绑定域名)">
<meta name="twitter:description" content="前言&amp;emsp;&amp;emsp;一直想自己搞个人博客，在上面记录一些自己的日常！如今，github提供了免费的域名和空间，用户可以通过username.github.io来设置自己的个人主页或博客，虽然是静态的，但是聊胜于无啊。利用github pages的特性，一开始我使用jekyll来构造整个博客静态网站，但是使用了一阵子发现有不小的局限性以及扩展性不强，于是迁移到了生态圈更大的hexo,套用了简">
<meta name="twitter:image" content="http://wardlin.github.io/images/node global.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: "",
      labels: ""
    }
  };
</script>



  <link rel="canonical" href="http://wardlin.github.io/2017/03/20/hexo+github搭建个人博客(绑定域名)/"/>





  <title> hexo+github搭建个人博客(绑定域名) | wardlin's blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">wardlin's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocapitalize="off" autocomplete="off" autocorrect="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>


 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://wardlin.github.io/2017/03/20/hexo+github搭建个人博客(绑定域名)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wardlin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wardlin's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                hexo+github搭建个人博客(绑定域名)
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-20T22:57:37+08:00">
                2017-03-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/blog/" itemprop="url" rel="index">
                    <span itemprop="name">blog</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>&emsp;&emsp;一直想自己搞个人博客，在上面记录一些自己的日常！如今，github提供了免费的域名和空间，用户可以通过username.github.io来设置自己的个人主页或博客，虽然是静态的，但是聊胜于无啊。利用github pages的特性，一开始我使用jekyll来构造整个博客静态网站，但是使用了一阵子发现有不小的局限性以及扩展性不强，于是迁移到了生态圈更大的hexo,套用了简洁美观的<a href="http://theme-next.iissnan.com/" target="_blank" rel="external">next主题</a>。同时将username.github.io挂载在了自己的私人域名下<a href="http://wardlin.site" target="_blank" rel="external">wardlin.site</a><br>&emsp;&emsp;如今博客大体框架已经搭建好了，具备了首页、个人主页、分类、音乐播放等模板。其他的一些功能如评论、分享等会陆续更新……<br><a id="more"></a><br>&emsp;&emsp;如今以这篇日记简单记录一下整个过程，以备后用！</p>
<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><ul>
<li>操作系统：window10 64 bit</li>
<li><a href="http://nodejs.cn/" target="_blank" rel="external">nodejs v6.10.0</a></li>
<li><a href="https://git-scm.com/" target="_blank" rel="external">Git v2.9.0</a></li>
<li><a href="https://github.com/" target="_blank" rel="external">github个人账户</a></li>
</ul>
<h2 id="搭建博客框架"><a href="#搭建博客框架" class="headerlink" title="搭建博客框架"></a>搭建博客框架</h2><h3 id="hexo-安装"><a href="#hexo-安装" class="headerlink" title="hexo 安装"></a>hexo 安装</h3><p>在安装好nodejs的同时，我们也安装了npm(nodejs的包管理工具)。npm的安装源可以换成<a href="https://npm.taobao.org/" target="_blank" rel="external">淘宝NPM镜像</a>，防止被’墙’。</p>
<blockquote>
<p>npm install -g cnpm –registry=<a href="https://registry.npm.taobao.org" target="_blank" rel="external">https://registry.npm.taobao.org</a></p>
</blockquote>
<p>要想在gitbash中运行node和npm命令，node需要全局安装或者nodejs的path环境变量在系统盘下，如下图：</p>
<p><img src="/images/node global.png" width="100%" height="100%" align="center/"></p>
<p>然后在d盘根目录下创建blog文件夹，右键’Git bash’打开操作界面，输入指令</p>
<blockquote>
<p>$ cnpm install -g hexo-cli</p>
</blockquote>
<p>再继续输入命令</p>
<blockquote>
<p>$ cnpm install hexo –save</p>
</blockquote>
<p>输入以下命令初始化blog文件夹结构(详细解读参考<a href="https://hexo.io/zh-cn/docs/setup.html" target="_blank" rel="external">hexo建站</a>)</p>
<blockquote>
<p>$ npm install</p>
</blockquote>
<p>成功后输入<code>hexo -v</code>就可以看到对应的版本号了！</p>
<h3 id="本地运行hexo"><a href="#本地运行hexo" class="headerlink" title="本地运行hexo"></a>本地运行hexo</h3><h4 id="初始化hexo"><a href="#初始化hexo" class="headerlink" title="初始化hexo"></a>初始化hexo</h4><blockquote>
<p>$ hexo init</p>
</blockquote>
<h4 id="运行hexo"><a href="#运行hexo" class="headerlink" title="运行hexo"></a>运行hexo</h4><blockquote>
<p>$ hexo s -g</p>
</blockquote>
<p>根据提示，在浏览器输入<a href="http://localhost:4000就可以看到博客的模型了" target="_blank" rel="external">http://localhost:4000就可以看到博客的模型了</a></p>
<h3 id="管理博客"><a href="#管理博客" class="headerlink" title="管理博客"></a>管理博客</h3><p>配置信息<code>_config.yml</code>文件，以下统称<code>站点配置文件</code></p>
<ul>
<li><p>用编辑器打开blog/_config.yml文件，进行个人设置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line">#博客名称</div><div class="line">title: </div><div class="line">#副标题</div><div class="line">subtitle: </div><div class="line">#简介,方便爬虫爬取博客信息(SEO)</div><div class="line">description: </div><div class="line">#博客作者</div><div class="line">author: username</div><div class="line">#博客语言(简体中文)</div><div class="line">language: zh-Hans</div><div class="line">#时区(默认和电脑的时区一致)</div><div class="line">timezone:</div><div class="line"></div><div class="line">#博客地址,与申请的GitHub一致</div><div class="line">url: http://username.github.io</div><div class="line">root: /</div><div class="line">#博客链接格式</div><div class="line">permalink: :year/:month/:day/:title/</div><div class="line">permalink_defaults:</div><div class="line"></div><div class="line">source_dir: source</div><div class="line">public_dir: public</div><div class="line">tag_dir: tags</div><div class="line">archive_dir: archives</div><div class="line">category_dir: categories</div><div class="line">code_dir: downloads/code</div><div class="line">i18n_dir: :lang</div><div class="line">skip_render:</div><div class="line"></div><div class="line">new_post_name: :title.md # File name of new posts</div><div class="line">default_layout: post</div><div class="line">titlecase: false # Transform title into titlecase</div><div class="line">external_link: true # Open external links in new tab</div><div class="line">filename_case: 0</div><div class="line">render_drafts: false</div><div class="line">post_asset_folder: false</div><div class="line">relative_link: false</div><div class="line">future: true</div><div class="line">highlight:</div><div class="line">  enable: true</div><div class="line">  line_number: true</div><div class="line">  auto_detect: true</div><div class="line">  tab_replace:</div><div class="line"></div><div class="line">default_category: uncategorized</div><div class="line">category_map:</div><div class="line">tag_map:</div><div class="line"></div><div class="line">#日期格式</div><div class="line">date_format: YYYY-MM-DD</div><div class="line">time_format: HH:mm:ss</div><div class="line"></div><div class="line">#分页，每页文章数量</div><div class="line">per_page: 10</div><div class="line">pagination_dir: page</div><div class="line"></div><div class="line">#博客主题</div><div class="line">theme: landscape</div><div class="line"></div><div class="line">#发布到github.io库设置</div><div class="line">deploy: </div><div class="line">  type: git</div><div class="line">  #username改为你的github用户名</div><div class="line">  repository: https://github.com/username/username.github.io.git</div><div class="line">  branch: master</div></pre></td></tr></table></figure>
</li>
<li><p>写博客</p>
<blockquote>
<p>$ hexo new ‘hello’</p>
</blockquote>
<p> 这会在blog/source/_post文件夹下生成hello.md，打开该文件就可以编辑了。<a href="http://www.appinn.com/markdown/" target="_blank" rel="external">markdown语法</a></p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">title: hello</div><div class="line">date: 2015-07-01 22:37:23</div><div class="line">categories:</div><div class="line">  - 日志</div><div class="line">  - 二级目录</div><div class="line">tags:</div><div class="line">  - hello</div><div class="line">---</div><div class="line"></div><div class="line">摘要:</div><div class="line">&lt;!--more--&gt;</div><div class="line">正文:</div></pre></td></tr></table></figure>
<p> <em>所有的博文都保存在blog/source/_post文件下</em></p>
</li>
<li><p>本地预览新博文</p>
<ul>
<li><p>生成静态文件(blog/public文件夹下)</p>
<blockquote>
<p>$ hexo generate</p>
</blockquote>
<p><em>命令可简写为<code>hexo g</code></em></p>
</li>
<li><p>发表草稿</p>
<blockquote>
<p>$ hexo publish [layout] <filename></filename></p>
</blockquote>
</li>
<li><p>启动本地服务器</p>
<blockquote>
<p>$ hexo server</p>
</blockquote>
<p><em>命令可简写为<code>hexo s</code></em> </p>
</li>
<li><p>部署网站(这里用于提交博客信息到github上)</p>
<blockquote>
<p>$ hexo deploy</p>
</blockquote>
<p><em>命令可简写为<code>hexo d</code></em></p>
</li>
</ul>
</li>
</ul>
<h3 id="创建github-io库"><a href="#创建github-io库" class="headerlink" title="创建github.io库"></a>创建github.io库</h3><p>&emsp;&emsp;在自己的github上新建一个repository，命名为uesrname.github.io(username为你的github账号名)。然后在该仓库右边”setting”设置<a href="https://pages.github.com/" target="_blank" rel="external">git pages</a>为”Launch automatic page generator”。<br>&emsp;&emsp;在电脑上gitbash窗口使用 <code>hexo d</code>可以提交博客网站文件到github上。</p>
<h3 id="绑定个人域名和github地址"><a href="#绑定个人域名和github地址" class="headerlink" title="绑定个人域名和github地址"></a>绑定个人域名和github地址</h3><ul>
<li>购买私人域名<br>到<a href="https://account.aliyun.com/" target="_blank" rel="external">阿里云</a>上购买一个域名，进行实名认证</li>
<li><p>github.io库创建CNAME文件<br>到username.github.io仓库根目录下创建CNAME文件(<strong>文件名大写，无后缀</strong>)，在该文件写上自己需要绑定的域名(不需要添加www),例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wardlin.site</div></pre></td></tr></table></figure>
</li>
<li><p>去域名提供商上设置域名解析</p>
<ul>
<li>到阿里云上找到域名，点击’管理’，进行DNS修改，将DNS服务器修改为<code>f1g1ns1.dnspod.net</code>和<code>f1g1ns2.dnspod.net</code>(dnspod是国内解析，速度更快)</li>
<li><p>点击’域名解析’，添加解析如下图：</p>
<p><img src="/images/阿里云域名解析.png
" width="100%" height="100%" align="center/"></p>
</li>
<li><p>注册登录<a href="https://www.dnspod.cn/" target="_blank" rel="external">dnspod官网</a>，同样的添加自己的域名，然后在域名下添加上面的三条解析记录</p>
</li>
</ul>
</li>
<li>访问域名<br>访问自己的私人域名，估计设置几分钟之后便能生效(访问username.github.io会跳转到购买的域名下)</li>
</ul>
<h3 id="使用next主题"><a href="#使用next主题" class="headerlink" title="使用next主题"></a>使用<a href="http://theme-next.iissnan.com/" target="_blank" rel="external">next主题</a></h3><h4 id="下载next主题包"><a href="#下载next主题包" class="headerlink" title="下载next主题包"></a>下载next主题包</h4><p><em>next主题下的_config.yml(blog/themes/next/_config.yml)文件统称为<code>主题配置文件</code></em><br>在gitbash窗口中输入以下命令</p>
<blockquote>
<p>$ cd your-hexo-site<br>$ git clone <a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="external">https://github.com/iissnan/hexo-theme-next</a> themes/next</p>
</blockquote>
<p>打开<code>站点配置文件</code>， 找到<code>theme</code>字段，并将其值更改为<code>next</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">theme: next</div></pre></td></tr></table></figure>
<p>先用<code>hexo clean</code>清除缓存，再用下列命令验证<code>next</code>主题是否应用成功</p>
<blockquote>
<p>$ hexo g<br>$ hexo s</p>
</blockquote>
<p>此时即可使用浏览器访问 <a href="http://localhost:4000，检查站点是否正确运行。" target="_blank" rel="external">http://localhost:4000，检查站点是否正确运行。</a></p>
<h4 id="选择Scheme"><a href="#选择Scheme" class="headerlink" title="选择Scheme"></a>选择Scheme</h4><ul>
<li>Muse - 默认 Scheme，这是 NexT 最初的版本，黑白主调，大量留白</li>
<li>Mist - Muse 的紧凑版本，整洁有序的单栏外观</li>
<li>Pisces - 双栏 Scheme，小家碧玉似的清新</li>
</ul>
<p>这是next主题提供的三种不同外观，我选择的是Mist风格外观<br>在<code>主题配置文件</code>下修改scheme<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#scheme: Muse</div><div class="line">#scheme: Mist</div><div class="line">scheme: Pisces</div></pre></td></tr></table></figure></p>
<h4 id="设置头像"><a href="#设置头像" class="headerlink" title="设置头像"></a>设置头像</h4><p>编辑<code>主题配置文件</code>，修改字段<code>avatar</code>，值设置成头像的链接地址。其中，头像的链接地址可以是：</p>
<p><img src="/images/头像更改.png" width="100%" height="100%" align="center/"></p>
<h4 id="添加「标签」页面"><a href="#添加「标签」页面" class="headerlink" title="添加「标签」页面"></a>添加「标签」页面</h4><p>新建「标签」页面，并在菜单中显示「标签」链接。「标签」页面将展示站点的所有标签，若你的所有文章都未包含标签，此页面将是空的。 底下代码是一篇包含标签的文章的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">title: 标签测试文章</div><div class="line">tags:</div><div class="line">  - Testing</div><div class="line">  - Another Tag</div><div class="line">---</div></pre></td></tr></table></figure>
<ul>
<li><p>新建页面<br>在终端窗口下，定位到 Hexo 站点目录下。使用 hexo new page 新建一个页面，命名为 tags ：</p>
<blockquote>
<p>$ cd your-hexo-site<br>$ hexo new page tags</p>
</blockquote>
</li>
<li><p>设置页面<br>编辑刚新建的页面，将页面的类型设置为 tags ，主题将自动为这个页面显示标签云。页面内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">title: 标签</div><div class="line">date: 2014-12-22 12:39:04</div><div class="line">type: &quot;tags&quot;</div><div class="line">---</div></pre></td></tr></table></figure>
</li>
<li><p>修改菜单<br>在菜单中添加链接。编辑 主题配置文件 ， 添加 tags 到 menu 中，如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">menu:</div><div class="line">home: /</div><div class="line">archives: /archives</div><div class="line">tags: /tags</div></pre></td></tr></table></figure>
<p><em>详细说明可参考官方文档<a href="http://theme-next.iissnan.com/theme-settings.html" target="_blank" rel="external">添加「标签」页面</a></em></p>
</li>
</ul>
<h4 id="添加「分类」页面"><a href="#添加「分类」页面" class="headerlink" title="添加「分类」页面"></a>添加「分类」页面</h4><p>分类页面的添加与标签的方法相同，可参考官方文档<a href="http://theme-next.iissnan.com/theme-settings.html" target="_blank" rel="external">添加「分类」页面</a></p>
<h4 id="添加「音乐」功能"><a href="#添加「音乐」功能" class="headerlink" title="添加「音乐」功能"></a>添加「音乐」功能</h4><ul>
<li>在网页版网易云音乐找到心仪歌曲的外链<br><img src="/images/网易云音乐外链.png" width="100%" height="100%" align="center/"></li>
<li>点击外链，复制其<code>HTML代码</code></li>
<li>在<code>theme/layout</code>里找到侧边栏文件<code>sidebar.swig</code>，在<code>endif</code>之前加入上面的<code>HTML代码</code></li>
</ul>
<h4 id="添加-社交链接"><a href="#添加-社交链接" class="headerlink" title="添加 社交链接"></a>添加 社交链接</h4><p>在侧边栏添加社交链接，需要在<code>主题配置文件</code>中设置链接和链接图标</p>
<ul>
<li><p>链接<br>链接放置在<code>social</code>字段下，一行一个链接。其键值格式是<code>显示文本: 链接地址</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># Social links</div><div class="line">social:</div><div class="line">  GitHub: https://github.com/your-user-name</div><div class="line">  Twitter: https://twitter.com/your-user-name</div><div class="line">  微博: http://weibo.com/your-user-name</div><div class="line">  豆瓣: http://douban.com/people/your-user-name</div><div class="line">  知乎: http://www.zhihu.com/people/your-user-name</div><div class="line">  # 等等</div></pre></td></tr></table></figure>
</li>
<li><p>链接图片<br>设定链接的图标，对应的字段是<code>social_icons</code>。其键值格式是<code>匹配键: Font Awesome 图标名称</code>，<code>匹配键</code>与上一步所配置的链接的<code>显示文本</code> 相同（大小写严格匹配），<code>图标名称</code>是 Font Awesome 图标的名字（不必带 fa- 前缀）。<code>enable</code> 选项用于控制是否显示图标，你可以设置成<code>false</code>来去掉图标。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># Social Icons</div><div class="line">social_icons:</div><div class="line">  enable: true</div><div class="line">  # Icon Mappings</div><div class="line">  GitHub: github</div><div class="line">  Twitter: twitter</div><div class="line">  微博: weibo</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="添加「Local-Search」页面-简单版"><a href="#添加「Local-Search」页面-简单版" class="headerlink" title="添加「Local Search」页面(简单版)"></a>添加「Local Search」页面(简单版)</h4><ul>
<li>安装 hexo-generator-searchdb</li>
<li><p>编辑 <code>站点配置文件</code>，添加以下字段：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">search:</div><div class="line">  path: search.xml</div><div class="line">  field: post</div><div class="line">  format: html</div><div class="line">  limit: 10000</div></pre></td></tr></table></figure>
</li>
<li><p>编辑 <code>主题配置文件</code> ，启用本地搜索</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># Local search</div><div class="line">local_search:</div><div class="line">  enable: true</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="添加「Algolia搜索」页面"><a href="#添加「Algolia搜索」页面" class="headerlink" title="添加「Algolia搜索」页面"></a>添加「Algolia搜索」页面</h4><p>&emsp;&emsp;另一种搜索服务集成<a href="https://www.algolia.com/" target="_blank" rel="external">Algolia</a>，因为之前广泛使用的Swiftype 站内搜索官方已经暂停了个人使用，只能通过企业注册使用。当然，Algolia也提供了很好的搜索服务，它是是一家致力于为用户提供毫秒级的数据库搜索服务的法国初创公司，其初衷是致力于让客户可以获得“100ms”等级的实时搜索服务。并且在next主题的5.1以上版本已经集成Algolia站内搜索功能，使用起来很便捷。</p>
<ul>
<li>注册登录<a href="https://www.algolia.com/" target="_blank" rel="external">Algolia官网</a>，我使用github账号登录</li>
<li><p>进入<code>Dashboard</code>的<code>Indices</code>界面，点击<code>NEW  INDEX</code>添加关键字<code>INDEX</code></p>
<p><img src="/images/algolia index.png" width="100%" height="100%" align="center/"></p>
</li>
<li><p>点击左侧<code>API Keys</code>，可以获取到我们需要的信息(还有上面的<code>INDEX</code>)</p>
<p><img src="/images/algolia keys.png" width="100%" height="100%" align="center/"></p>
</li>
<li><p>安装<code>hexo-algoliasearch</code>插件并填写配置信息</p>
<blockquote>
<p>$ npm install hexo-algolia –save</p>
</blockquote>
</li>
<li><p>在根目录的<code>站点配置文件</code>中加入如下配置,注意改成前面algolia注册获得的数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">search: true</div><div class="line">algolia:</div><div class="line">appId: &apos;appId&apos;</div><div class="line">apiKey: &apos;apiKey&apos;</div><div class="line">adminApiKey: &apos;adminApiKey&apos;</div><div class="line">indexName: &apos;indexName&apos;</div><div class="line">chunkSize: 5000</div><div class="line">fields:</div><div class="line">  - title</div><div class="line">  - slug</div><div class="line">  - content:strip</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>在`主题配置文件``中加入以下配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">algolia_search:</div><div class="line">  enable: true</div></pre></td></tr></table></figure>
</li>
<li><p>接着gitbash窗口执行以下命令，确保数据上传到Algolia成功(不成功可以尝试先清除缓存<code>hexo clean</code>)</p>
<blockquote>
<p>$ hexo algolia</p>
</blockquote>
<p><img src="/images/hexo algolia.png" width="100%" height="100%" align="center/"></p>
</li>
<li><p>此时到Algolia官网上查看会有成功上传的网站信息</p>
<p><img src="/images/algolia indcies.png" width="100%" height="100%" align="center/"></p>
</li>
<li><p>在theme中添加布局和样式文件</p>
<ul>
<li><p>新建<code>algolia.swig</code>(/themes/next/layout/_partials/search/algolia.swig)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;site-search&quot;&gt;</div><div class="line">  &lt;div class=&quot;algolia-popup popup&quot;&gt;</div><div class="line">    &lt;div class=&quot;algolia-search&quot;&gt;</div><div class="line">      &lt;div class=&quot;algolia-search-input-icon&quot;&gt;</div><div class="line">        &lt;i class=&quot;fa fa-search&quot;&gt;&lt;/i&gt;</div><div class="line">      &lt;/div&gt;</div><div class="line">      &lt;div class=&quot;algolia-search-input&quot; id=&quot;algolia-search-input&quot;&gt;&lt;/div&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line"></div><div class="line">    &lt;div class=&quot;algolia-results&quot;&gt;</div><div class="line">      &lt;div id=&quot;algolia-stats&quot;&gt;&lt;/div&gt;</div><div class="line">      &lt;div id=&quot;algolia-hits&quot;&gt;&lt;/div&gt;</div><div class="line">      &lt;div id=&quot;algolia-pagination&quot; class=&quot;algolia-pagination&quot;&gt;&lt;/div&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line"></div><div class="line">    &lt;span class=&quot;popup-btn-close&quot;&gt;</div><div class="line">      &lt;i class=&quot;fa fa-times-circle&quot;&gt;&lt;/i&gt;</div><div class="line">    &lt;/span&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;script src=&quot;//cdn.bootcss.com/instantsearch.js/1.7.1/instantsearch.min.js&quot;&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>在<code>search.swig</code>(/themes/next/layout/_partials/search.swig)引入<code>algolia.swig</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&#123;% elseif theme.algolia_search %&#125;</div><div class="line">   &#123;% include &apos;search/algolia.swig&apos; %&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>在要触发搜索的<code>HTML</code>节点(/themes/next/layout/_partials/header.swig)加入一个CLASS名为<code>popup-trigger</code>(在line 56之后)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;% elseif config.search %&#125;</div><div class="line">  &lt;a href=&quot;javascript:;&quot; class=&quot;popup-trigger&quot;&gt;</div><div class="line">&#123;% elseif config.search || theme.algolia_search.enable %&#125;</div><div class="line">  &lt;a href=&quot;javascript:;&quot; class=&quot;popup-trigger&quot;&gt;</div><div class="line">&#123;% elseif theme.algolia_search %&#125;</div><div class="line">  &lt;a href=&quot;#&quot; class=&quot;popup-trigger&quot;&gt;</div><div class="line">    &#123;&#123; __(&apos;menu.search&apos;) &#125;&#125;</div><div class="line">  &lt;/a&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>修改<code>algolia-search.js</code>文件(/themes/next/source/js/src/algolia-search.js)，加入<code>CONFIG</code>对象</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"> var CONFIG = &#123;</div><div class="line">    root: &apos;/&apos;,</div><div class="line">    algolia: &#123;</div><div class="line">        applicationID: &apos;applicationID&apos;,</div><div class="line">        apiKey: &apos;apiKey&apos;,</div><div class="line">        indexName: &apos;indexName&apos;,</div><div class="line">        hits: &#123; &quot;per_page&quot;: 10 &#125;,</div><div class="line">        labels: &#123; &quot;input_placeholder&quot;: &quot;Searching...&quot;, &quot;hits_empty&quot;: &quot;未发现与 「$&#123;query&#125;」相关的内容&quot;, &quot;hits_stats&quot;: &quot;$&#123;hits&#125; 条相关条目，使用了 $&#123;time&#125; 毫秒&quot; &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
<li><p>新建<code>search.css</code>(/themes/next/source/css/search.css)样式文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div></pre></td><td class="code"><pre><div class="line">ul.search-result-list &#123;</div><div class="line">  padding-left: 0px;</div><div class="line">  margin: 0px 5px 0px 8px;</div><div class="line">&#125;</div><div class="line">p.search-result &#123;</div><div class="line">  border-bottom: 1px dashed #ccc;</div><div class="line">  padding: 5px 0;</div><div class="line">&#125;</div><div class="line">a.search-result-title &#123;</div><div class="line">  font-weight: bold;</div><div class="line">&#125;</div><div class="line">a.search-result &#123;</div><div class="line">  border-bottom: transparent;</div><div class="line">  display: block;</div><div class="line">  white-space: nowrap;</div><div class="line">  overflow: hidden;</div><div class="line">  text-overflow: ellipsis;</div><div class="line">&#125;</div><div class="line">.search-keyword &#123;</div><div class="line">  border-bottom: 1px dashed #4088b8;</div><div class="line">  font-weight: bold;</div><div class="line">&#125;</div><div class="line">#local-search-result &#123;</div><div class="line">  height: 90%;</div><div class="line">  overflow: auto;</div><div class="line">&#125;</div><div class="line">.popup &#123;</div><div class="line">  display: none;</div><div class="line">  position: fixed;</div><div class="line">  top: 10%;</div><div class="line">  left: 50%;</div><div class="line">  width: 700px;</div><div class="line">  height: 80%;</div><div class="line">  margin-left: -350px;</div><div class="line">  padding: 3px 0 0 10px;</div><div class="line">  background: #fff;</div><div class="line">  color: #333;</div><div class="line">  z-index: 9999;</div><div class="line">  border-radius: 0px;</div><div class="line">&#125;</div><div class="line">@media (max-width: 767px) &#123;</div><div class="line">  .popup &#123;</div><div class="line">    padding: 3px;</div><div class="line">    top: 0;</div><div class="line">    left: 0;</div><div class="line">    margin: 0;</div><div class="line">    width: 100%;</div><div class="line">    height: 100%;</div><div class="line">    border-radius: 0px;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">.popoverlay &#123;</div><div class="line">  display: none;</div><div class="line">  position: fixed;</div><div class="line">  width: 100%;</div><div class="line">  height: 100%;</div><div class="line">  top: 0px;</div><div class="line">  left: 0px;</div><div class="line">  z-index: 2080;</div><div class="line">  background-color: rgba(0,0,0,0.3);</div><div class="line">&#125;</div><div class="line">#local-search-input &#123;</div><div class="line">  margin-bottom: 10px;</div><div class="line">  width: 50%;</div><div class="line">&#125;</div><div class="line">.popup-btn-close &#123;</div><div class="line">  position: absolute;</div><div class="line">  top: 6px;</div><div class="line">  right: 14px;</div><div class="line">  color: #4ebd79;</div><div class="line">  font-size: 14px;</div><div class="line">  font-weight: bold;</div><div class="line">  text-transform: uppercase;</div><div class="line">  cursor: pointer;</div><div class="line">&#125;</div><div class="line">#no-result &#123;</div><div class="line">  position: absolute;</div><div class="line">  left: 44%;</div><div class="line">  top: 42%;</div><div class="line">  color: #ccc;</div><div class="line">&#125;</div><div class="line">.busuanzi-count:before &#123;</div><div class="line">  content: &quot; &quot;;</div><div class="line">  float: left;</div><div class="line">  width: 260px;</div><div class="line">  min-height: 25px;</div><div class="line">&#125;</div><div class="line">@media (min-width: 768px) and (max-width: 991px) &#123;</div><div class="line">  .busuanzi-count &#123;</div><div class="line">    width: auto;</div><div class="line">  &#125;</div><div class="line">  .busuanzi-count:before &#123;</div><div class="line">    display: none;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">@media (max-width: 767px) &#123;</div><div class="line">  .busuanzi-count &#123;</div><div class="line">    width: auto;</div><div class="line">  &#125;</div><div class="line">  .busuanzi-count:before &#123;</div><div class="line">    display: none;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">.site-uv,</div><div class="line">.site-pv,</div><div class="line">.page-pv &#123;</div><div class="line">  display: inline-block;</div><div class="line">&#125;</div><div class="line">.site-uv .busuanzi-value,</div><div class="line">.site-pv .busuanzi-value,</div><div class="line">.page-pv .busuanzi-value &#123;</div><div class="line">  margin: 0 5px;</div><div class="line">&#125;</div><div class="line">.site-uv &#123;</div><div class="line">  margin-right: 10px;</div><div class="line">&#125;</div><div class="line">.site-uv::after &#123;</div><div class="line">  content: &quot;|&quot;;</div><div class="line">  padding-left: 10px;</div><div class="line">&#125;</div><div class="line">.algolia-popup &#123;</div><div class="line">  overflow: hidden;</div><div class="line">  padding: 0;</div><div class="line">&#125;</div><div class="line">.algolia-popup .popup-btn-close &#123;</div><div class="line">  padding-left: 15px;</div><div class="line">  border-left: 1px solid #eee;</div><div class="line">  top: 10px;</div><div class="line">&#125;</div><div class="line">.algolia-popup .popup-btn-close .fa &#123;</div><div class="line">  color: #999;</div><div class="line">  font-size: 18px;</div><div class="line">&#125;</div><div class="line">.algolia-popup .popup-btn-close:hover .fa &#123;</div><div class="line">  color: #222;</div><div class="line">&#125;</div><div class="line">.algolia-search &#123;</div><div class="line">  padding: 10px 15px 5px;</div><div class="line">  max-height: 50px;</div><div class="line">  background: #f5f5f5;</div><div class="line">  border-top-left-radius: 5px;</div><div class="line">  border-top-right-radius: 5px;</div><div class="line">&#125;</div><div class="line">.algolia-search-input-icon &#123;</div><div class="line">  display: inline-block;</div><div class="line">  width: 20px;</div><div class="line">&#125;</div><div class="line">.algolia-search-input-icon .fa &#123;</div><div class="line">  font-size: 18px;</div><div class="line">&#125;</div><div class="line">.algolia-search-input &#123;</div><div class="line">  display: inline-block;</div><div class="line">  width: calc(90% - 20px);</div><div class="line">&#125;</div><div class="line">.algolia-search-input input &#123;</div><div class="line">  padding: 5px 0;</div><div class="line">  width: 100%;</div><div class="line">  outline: none;</div><div class="line">  border: none;</div><div class="line">  background: transparent;</div><div class="line">&#125;</div><div class="line">.algolia-powered &#123;</div><div class="line">  float: right;</div><div class="line">&#125;</div><div class="line">.algolia-powered img &#123;</div><div class="line">  display: inline-block;</div><div class="line">  height: 18px;</div><div class="line">  vertical-align: middle;</div><div class="line">&#125;</div><div class="line">.algolia-results &#123;</div><div class="line">  position: relative;</div><div class="line">  overflow: auto;</div><div class="line">  padding: 10px 30px;</div><div class="line">  height: calc(100% - 50px);</div><div class="line">&#125;</div><div class="line">.algolia-results hr &#123;</div><div class="line">  margin: 10px 0;</div><div class="line">&#125;</div><div class="line">.algolia-results .highlight &#123;</div><div class="line">  font-style: normal;</div><div class="line">  margin: 0;</div><div class="line">  padding: 0 2px;</div><div class="line">  font-size: inherit;</div><div class="line">  color: #f00;</div><div class="line">&#125;</div><div class="line">.algolia-hits &#123;</div><div class="line">  margin-top: 20px;</div><div class="line">&#125;</div><div class="line">.algolia-hit-item &#123;</div><div class="line">  margin: 15px 0;</div><div class="line">&#125;</div><div class="line">.algolia-hit-item-link &#123;</div><div class="line">  display: block;</div><div class="line">  border-bottom: 1px dashed #ccc;</div><div class="line">  transition-duration: 0.2s;</div><div class="line">  transition-timing-function: ease-in-out;</div><div class="line">  transition-delay: 0s;</div><div class="line">&#125;</div><div class="line">.algolia-pagination .pagination &#123;</div><div class="line">  margin-top: 40px;</div><div class="line">  border-top: none;</div><div class="line">  padding: 0;</div><div class="line">  text-align: center;</div><div class="line">&#125;</div><div class="line">.algolia-pagination .pagination-item &#123;</div><div class="line">  display: inline-block;</div><div class="line">&#125;</div><div class="line">.algolia-pagination .page-number &#123;</div><div class="line">  border-top: none;</div><div class="line">&#125;</div><div class="line">.algolia-pagination .page-number:hover &#123;</div><div class="line">  border-bottom: 1px solid #222;</div><div class="line">&#125;</div><div class="line">.algolia-pagination .disabled-item &#123;</div><div class="line">  visibility: hidden;</div><div class="line">&#125;</div><div class="line">.fa-search::before&#123;</div><div class="line">  color: #999999;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>将上述<code>algolia-search.js</code>和<code>search.css</code>文件引入<code>footer.swig</code>文件(/themes/next/layout/_partials/footer.swig)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;link href=&quot;&#123;&#123; url_for(theme.css) &#125;&#125;/search.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</div><div class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;&#123;&#123; url_for(theme.js) &#125;&#125;/src/algolia-search.js&quot;&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>此时重新生成静态文件在本地服务器运行，打开浏览器就可以看到想要的效果了</p>
<p><img src="/images/search.png" width="100%" height="100%" align="center/"></p>
</li>
</ul>
<p><strong>后记:</strong><br>&emsp;&emsp;此时我们点击搜索出来的条目，链接却是<code>undefined</code>。<br>这时我们就需要查看<code>algolia-search.js</code>文件，其中标示了</p>
<p><img src="/images/algolia-search link.png" width="100%" height="100%" align="center/"></p>
<p>但是查阅Algolia官网的<code>JSON ANSWER</code>，并不包含<code>permalink</code>和<code>path</code>字段</p>
<p><img src="/images/algolia json answer.png" width="100%" height="100%" align="center/"></p>
<p>所以链接的值为<code>undefined</code></p>
<blockquote>
<p><strong>解决方法:</strong></p>
</blockquote>
<ul>
<li><p><code>algolia-search.js</code>修改<code>link</code>参数如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var link = data.permalink ? data.permalink : data.slug;</div></pre></td></tr></table></figure>
</li>
<li><p><code>站点配置文件</code>修改<code>permalink</code>的格式为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">permalink: :title/</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="http://blog.csdn.net/jzooo/article/details/46781805" target="_blank" rel="external">零基础免费搭建个人博客-hexo+github</a></li>
<li><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="external">hexo文档</a></li>
<li><a href="http://theme-next.iissnan.com/" target="_blank" rel="external">NexT 使用文档</a></li>
<li><a href="http://blog.csdn.net/tyro_java/article/details/51348477" target="_blank" rel="external">在github上搭建自己的主页和域名的绑定</a></li>
<li><a href="http://blog.niices.com/Hexo-Next-Algolia-Search/" target="_blank" rel="external">Hexo+Next主题集成Algolia搜索</a></li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/hexo/" rel="tag"># hexo</a>
          
            <a href="/tags/github/" rel="tag"># github</a>
          
            <a href="/tags/blog/" rel="tag"># blog</a>
          
            <a href="/tags/next/" rel="tag"># next</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/03/18/在标签页头部插入个性图标/" rel="next" title="在标签页头部插入个性图标">
                <i class="fa fa-chevron-left"></i> 在标签页头部插入个性图标
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/03/25/vue初学笔记/" rel="prev" title="vue初学笔记">
                vue初学笔记 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="wardlin" />
          <p class="site-author-name" itemprop="name">wardlin</p>
           
              <p class="site-description motion-element" itemprop="description">to be coding...</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">15</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/wardlin" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/lin-fan-4-59" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>
        
        <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=86 height=86 src="//music.163.com/outchain/player?type=2&id=29743607&auto=0&height=66"></iframe>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#准备"><span class="nav-number">2.</span> <span class="nav-text">准备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#搭建博客框架"><span class="nav-number">3.</span> <span class="nav-text">搭建博客框架</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#hexo-安装"><span class="nav-number">3.1.</span> <span class="nav-text">hexo 安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#本地运行hexo"><span class="nav-number">3.2.</span> <span class="nav-text">本地运行hexo</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#初始化hexo"><span class="nav-number">3.2.1.</span> <span class="nav-text">初始化hexo</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#运行hexo"><span class="nav-number">3.2.2.</span> <span class="nav-text">运行hexo</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#管理博客"><span class="nav-number">3.3.</span> <span class="nav-text">管理博客</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建github-io库"><span class="nav-number">3.4.</span> <span class="nav-text">创建github.io库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#绑定个人域名和github地址"><span class="nav-number">3.5.</span> <span class="nav-text">绑定个人域名和github地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用next主题"><span class="nav-number">3.6.</span> <span class="nav-text">使用next主题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#下载next主题包"><span class="nav-number">3.6.1.</span> <span class="nav-text">下载next主题包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#选择Scheme"><span class="nav-number">3.6.2.</span> <span class="nav-text">选择Scheme</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#设置头像"><span class="nav-number">3.6.3.</span> <span class="nav-text">设置头像</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#添加「标签」页面"><span class="nav-number">3.6.4.</span> <span class="nav-text">添加「标签」页面</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#添加「分类」页面"><span class="nav-number">3.6.5.</span> <span class="nav-text">添加「分类」页面</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#添加「音乐」功能"><span class="nav-number">3.6.6.</span> <span class="nav-text">添加「音乐」功能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#添加-社交链接"><span class="nav-number">3.6.7.</span> <span class="nav-text">添加 社交链接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#添加「Local-Search」页面-简单版"><span class="nav-number">3.6.8.</span> <span class="nav-text">添加「Local Search」页面(简单版)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#添加「Algolia搜索」页面"><span class="nav-number">3.6.9.</span> <span class="nav-text">添加「Algolia搜索」页面</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考"><span class="nav-number">4.</span> <span class="nav-text">参考</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wardlin</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  



  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

  


  

</body>
</html>
